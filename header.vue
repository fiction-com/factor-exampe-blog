<template>
  <div class="blog-header">
    <div class="brand">
      <factor-link path="/" class="logo">
        <div class="fiction-icon">
          <svg
            width="256"
            height="68"
            viewBox="0 0 256 68"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M73.0095 59.4505H84.1742L88.5565 32.176H95.8552L97.2863 23.3747H89.9161L90.0592 22.6591L90.4885 20.3694C90.5839 20.0355 90.7986 19.463 91.1325 18.6521C91.8004 17.3641 93.0884 16.7201 94.9965 16.7201C96.3799 16.7201 97.7156 16.9347 99.0036 17.3641L100.864 9.27832C98.9559 8.65818 96.4992 8.34811 93.4939 8.34811C88.6281 8.34811 85.1457 9.61225 83.0468 12.1405C80.9478 14.6688 79.5167 18.4135 78.7535 23.3747H74.3886L73.0291 32.176H77.3939L73.0095 59.4505Z"
              fill="white"
            />
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M123.387 23.3747C123.053 25.4737 122.862 26.8332 122.815 27.4533C121.956 25.9268 120.62 24.7581 118.807 23.9471C116.995 23.0885 115.015 22.6591 112.868 22.6591C107.049 22.6591 102.397 24.9012 98.9151 29.3853C95.385 33.9172 93.62 39.0691 93.62 44.8413C93.62 49.1823 94.8126 52.7123 97.1978 55.4314C99.6306 58.1028 102.922 59.4385 107.072 59.4385C111.938 59.4385 115.945 57.6496 119.094 54.0719H119.165C119.118 54.4058 119.094 55.0975 119.094 56.147C119.094 57.2919 119.189 58.1267 119.38 58.6514H129.755L129.541 56.147C129.541 55.3837 129.612 54.5012 129.755 53.4994L134.55 23.3747H123.387ZM119.38 33.7502C120.572 35.0382 121.169 36.7555 121.169 38.9022C121.169 41.8598 120.286 44.4358 118.521 46.6301C116.804 48.8245 114.538 49.9217 111.723 49.9217C109.72 49.9217 108.122 49.2777 106.929 47.9897C105.737 46.7017 105.14 44.9844 105.14 42.8377C105.14 39.9278 105.999 37.3757 107.716 35.1813C109.529 32.9392 111.819 31.8182 114.586 31.8182C116.589 31.8182 118.187 32.4622 119.38 33.7502Z"
              fill="white"
            />
            <path
              d="M166.415 26.4516L162.551 35.3244C160.834 33.0347 158.21 31.8898 154.68 31.8898C151.818 31.8898 149.433 32.9869 147.525 35.1813C145.664 37.328 144.734 39.8562 144.734 42.7662C144.734 45.0082 145.378 46.7732 146.666 48.0612C148.002 49.3015 149.814 49.9217 152.104 49.9217C155.539 49.9217 158.616 48.8484 161.335 46.7017L162.336 55.4314C160.762 56.6717 158.711 57.6496 156.183 58.3652C153.702 59.0807 151.245 59.4385 148.813 59.4385C144.281 59.4385 140.584 58.079 137.721 55.3599C134.859 52.5931 133.428 48.9676 133.428 44.4835C133.428 38.4251 135.456 33.297 139.51 29.0991C143.613 24.8535 148.693 22.7307 154.752 22.7307C156.946 22.7307 159.164 23.0646 161.406 23.7325C163.648 24.3526 165.318 25.259 166.415 26.4516Z"
              fill="white"
            />
            <path
              d="M184.145 23.3747L184.717 19.4392C184.908 18.4374 185.003 17.3641 185.003 16.2192C185.003 15.122 184.932 14.3349 184.789 13.8579H173.698L173.841 16.0761C173.841 17.0301 173.793 17.9842 173.698 18.9383L172.982 23.3747H168.188L166.757 32.176H171.551L170.478 37.9004C170.096 40.0471 169.714 42.4561 169.333 45.1275C169.046 47.1787 168.903 49.1346 168.903 50.995C168.903 56.624 171.909 59.4385 177.919 59.4385C180.257 59.4385 182.952 59.0569 186.005 58.2936L186.864 49.2061C185.814 49.6355 184.669 49.8501 183.429 49.8501C181.473 49.8501 180.495 48.9438 180.495 47.131C180.495 44.8413 180.948 41.3828 181.855 36.7555L182.714 32.176H190.227L191.729 23.3747H184.145Z"
              fill="white"
            />
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M226.769 37.6857C226.769 43.9349 224.67 49.1346 220.472 53.2848C216.274 57.3873 211.026 59.4385 204.73 59.4385C199.959 59.4385 196.048 58.1267 192.995 55.503C189.989 52.8316 188.487 49.1823 188.487 44.555C188.487 38.3059 190.562 33.1062 194.712 28.956C198.91 24.8058 204.181 22.7307 210.526 22.7307C215.248 22.7307 219.136 24.0664 222.189 26.7378C225.242 29.3615 226.769 33.0108 226.769 37.6857ZM215.463 38.9022C215.463 36.7555 214.89 35.062 213.746 33.8218C212.648 32.5338 211.098 31.8898 209.094 31.8898C206.328 31.8898 204.086 33.0108 202.368 35.2529C200.699 37.4949 199.864 40.0471 199.864 42.9093C199.864 45.0559 200.412 46.7732 201.51 48.0612C202.654 49.3015 204.229 49.9217 206.232 49.9217C208.999 49.9217 211.217 48.8007 212.887 46.5586C214.604 44.3165 215.463 41.7644 215.463 38.9022Z"
              fill="white"
            />
            <path
              d="M253.539 33.9649L255.757 23.3747C255.042 22.9454 253.921 22.7307 252.394 22.7307C248.483 22.7307 245.358 24.615 243.021 28.3836C243.211 27.668 243.307 26.7855 243.307 25.736C243.307 24.6865 243.235 23.8994 243.092 23.3747H232.001L232.144 25.5929C232.144 26.547 232.073 27.5488 231.93 28.5982L227.207 58.6514H238.369L240.874 42.9808C241.303 40.0232 242.186 37.638 243.521 35.8253C244.905 34.0126 246.765 33.1062 249.103 33.1062C250.677 33.1062 251.965 33.3924 252.967 33.9649H253.539Z"
              fill="white"
            />
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M0 34C0 21.9202 9.79261 12.1276 21.8724 12.1276H35.3156C47.3953 12.1276 57.1879 21.9202 57.1879 34C57.1879 46.0798 47.3953 55.8724 35.3155 55.8724H21.8724C9.79259 55.8724 0 46.0798 0 34ZM21.8724 22.2646C15.3911 22.2646 10.137 27.5187 10.137 34C10.137 40.4813 15.3911 45.7354 21.8724 45.7354H35.3155C41.7968 45.7354 47.051 40.4813 47.051 34C47.051 27.5187 41.7968 22.2646 35.3156 22.2646H21.8724Z"
              fill="white"
            />
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M25.0443 68C24.3857 68 23.8517 67.4661 23.8517 66.8074V1.19259C23.8517 0.533939 24.3857 0 25.0443 0H32.7961C33.4548 0 33.9887 0.533937 33.9887 1.19258V66.8074C33.9887 67.4661 33.4548 68 32.7961 68H25.0443Z"
              fill="white"
            />
          </svg>

          <div class="sub-name">Blog Example</div>
        </div>
      </factor-link>
    </div>

    <div class="actions nav-area">
      <account-menu v-if="!userLoading && isLoggedIn()" />
      <factor-link
        v-else-if="!userLoading"
        class="nav-link"
        event="sign-in-modal"
        data-test="signin-link"
      >Login / Sign Up</factor-link>
    </div>
  </div>
</template>

<script lang="ts">
import { isLoggedIn, userInitialized } from "@factor/user"
import { factorLink } from "@factor/ui"
import { accountMenu } from "@factor/plugin-standard-signin"
export default {
  components: { factorLink, accountMenu },
  data() {
    return {
      userLoading: true
    }
  },
  async mounted(this: any) {
    await userInitialized()

    this.userLoading = false
  },
  methods: {
    isLoggedIn
  }
}
</script>
<style lang="postcss">
.blog-header {
  display: grid;
  grid-template-columns: max-content 1fr 200px;
  grid-template-areas: "grid-brand grid-selector grid-actions";
  grid-column-gap: 1rem;
  padding: 0.25em 1rem;
  width: 100%;
  background: var(--color-bg-contrast);
  color: var(--color-text);
  align-items: center;
  justify-content: space-between;

  .brand {
    grid-area: grid-brand;
  }
  .selector {
    grid-area: grid-selector;
  }
  .actions {
    grid-area: grid-actions;
    justify-self: flex-end;
  }
  @media (max-width: 900px) {
    grid-template-columns: max-content 1fr;
    grid-template-areas: "grid-brand grid-actions" "grid-selector grid-selector";
  }

  .logo {
    display: flex;
    align-items: center;
    color: inherit;
    .sub-name {
      font-weight: 700;
      margin-left: 0.5rem;
      text-transform: uppercase;
      opacity: 0.3;
      font-size: 0.8em;
      line-height: normal;
    }
  }
  .fiction-icon {
    display: flex;
    align-items: flex-end;
    border-radius: 0.5rem;

    padding: 0.5rem 1rem 0.6rem 1rem;
    a {
      display: block;
    }
    svg {
      height: 1.25rem;
      width: auto;
      display: block;
    }
  }

  .nav-link {
    background-color: rgba(255, 255, 255, 0.1);
    box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.3);
    border-radius: 0.25rem;
    padding: 0.5em 1rem;
    font-size: 0.9em;
    font-weight: 600;
    &:hover {
      opacity: 0.8;
    }
  }

  .nav-area {
    padding: 0.5rem;
  }
  .selector {
    select {
      font-size: 0.9em;
      background-color: rgba(255, 255, 255, 0.1);
      color: #fff;
      box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.3);
    }
  }
}
</style>
