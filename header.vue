<template>
  <div class="blog-header">
    <div class="brand">
      <factor-link path="/" class="logo">
        <div class="fiction-icon">
          <svg width="276" height="67" viewBox="0 0 276 67" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M77.4099 9V57.3H88.6799V38.89H106.46V29.86H88.6799V18.03H107.58V9H77.4099Z" fill="white"/>
            <path d="M143.522 37.84C143.522 32.66 142.122 28.81 139.392 26.15C136.452 23.49 132.182 22.16 126.512 22.16C121.402 22.16 116.502 23.35 111.742 25.66L114.682 32.94C115.872 32.17 117.482 31.47 119.512 30.84C121.472 30.21 123.432 29.86 125.252 29.86C129.942 29.86 132.322 31.75 132.322 35.39V36.16L123.642 36.51C118.462 36.79 114.682 38.26 112.302 41.06C110.902 42.67 110.202 44.7 110.202 47.08C110.202 50.65 111.392 53.38 113.912 55.27C116.292 57.16 119.232 58.07 122.732 58.07C124.272 58.07 125.742 57.79 127.282 57.23C128.752 56.67 129.872 56.11 130.572 55.55C131.272 54.92 131.972 54.29 132.602 53.66L132.812 57.3H143.522V37.84ZM132.392 47.78C131.832 48.62 131.062 49.39 130.082 50.02C129.032 50.65 127.912 50.93 126.652 50.93C125.112 50.93 123.852 50.58 122.872 49.81C121.892 49.04 121.402 47.99 121.402 46.66C121.402 44 123.222 42.6 126.862 42.46L132.392 42.11V47.78Z" fill="white"/>
            <path d="M175.093 46.31C174.253 46.94 173.133 47.5 171.663 48.06C170.193 48.62 168.723 48.83 167.323 48.83C164.663 48.83 162.563 48.06 161.023 46.45C159.413 44.84 158.643 42.67 158.643 39.94C158.643 37.35 159.413 35.25 161.023 33.64C162.633 32.03 164.663 31.19 167.183 31.19C170.473 31.19 173.413 32.24 176.073 34.27L178.523 25.8L177.333 24.89C176.353 24.19 174.813 23.56 172.643 23C170.403 22.44 168.093 22.16 165.713 22.16C160.673 22.16 156.333 23.84 152.763 27.06C149.123 30.28 147.373 34.69 147.373 40.15C147.373 45.68 149.123 50.02 152.693 53.24C156.193 56.46 160.533 58.07 165.573 58.07C168.023 58.07 170.263 57.79 172.363 57.23C174.393 56.67 175.793 56.11 176.563 55.62C177.333 55.13 177.963 54.64 178.523 54.08L178.733 53.94L176.073 45.47L175.093 46.31Z" fill="white"/>
            <path d="M198.573 22.86V13.48H187.303V22.86H182.403V31.33H187.303V44.7C187.303 49.6 188.073 52.96 189.753 54.85C191.573 57.02 194.373 58.07 198.153 58.07C200.533 58.07 203.193 57.72 206.133 56.95L205.573 48.2L205.153 48.34C204.173 48.69 203.193 48.83 202.213 48.83C200.883 48.83 199.973 48.55 199.553 47.99C198.853 47.22 198.573 45.82 198.573 43.72V31.33H206.203V22.86H198.573Z" fill="white"/>
            <path d="M228.561 58.07C234.161 58.07 238.711 56.46 242.281 53.24C245.851 49.95 247.671 45.61 247.671 40.15C247.671 34.76 245.851 30.42 242.281 27.06C238.711 23.84 234.161 22.16 228.561 22.16C222.961 22.16 218.341 23.84 214.771 27.06C211.131 30.42 209.381 34.76 209.381 40.15C209.381 45.61 211.131 49.95 214.771 53.24C218.341 56.46 222.961 58.07 228.561 58.07ZM228.561 30.98C230.941 30.98 232.831 31.82 234.231 33.5C235.631 35.18 236.401 37.28 236.401 39.94C236.401 42.6 235.631 44.77 234.231 46.45C232.831 48.13 230.941 48.9 228.561 48.9C226.181 48.9 224.221 48.13 222.821 46.45C221.421 44.77 220.721 42.6 220.721 39.94C220.721 37.28 221.421 35.18 222.821 33.5C224.221 31.82 226.181 30.98 228.561 30.98Z" fill="white"/>
            <path d="M275.02 22.58C274.32 22.3 273.27 22.16 271.87 22.16C268.02 22.16 265.15 24.05 263.33 27.69H263.19L263.26 22.79H252.06V57.3H263.26V41.97C263.26 38.68 263.82 36.3 265.01 34.76C266.27 33.08 267.95 32.24 270.19 32.24C271.87 32.24 273.2 32.52 274.25 33.08H274.74L275.37 22.79L275.02 22.58Z" fill="white"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M47.597 28.4231L47.5869 28.4239L47.5768 28.4251C47.0318 28.4896 44.2841 28.8217 41.6739 29.1375L36.5885 29.7531L36.2655 29.7923L34.2905 36.2509L35.0523 36.1599C40.2102 35.5438 45.6288 34.8903 49.7577 34.3909C51.8223 34.1412 53.5644 33.93 54.7904 33.7812L56.1102 33.6209C55.9916 34.8496 55.8548 36.0778 55.7176 37.3101L55.7173 37.312C55.5723 38.614 55.4268 39.9206 55.3027 41.2304C49.8216 41.8584 37.7332 43.305 32.5153 44.038L32.1922 44.0834L32.1036 44.3974C31.5279 46.4389 30.9156 48.4495 30.3028 50.4617L30.2861 50.5165C29.6682 52.5453 29.0502 54.5759 28.4725 56.6319C26.7921 62.613 21.2845 67 14.7497 67C6.87857 67 0.5 60.6364 0.5 52.7892C0.5 44.9633 6.28019 39.2352 14.7883 38.5769L14.7984 38.5761L14.8085 38.5749C15.3535 38.5104 18.1201 38.1761 20.749 37.8581L26.1994 37.1984L28.0847 30.7503L27.3331 30.8401C22.1754 31.4562 17.0206 32.0721 13.1551 32.534L7.32881 33.2302C7.44619 32.0188 7.6186 30.3968 7.77792 28.9189C7.82788 28.4556 7.87661 28.0059 7.92194 27.5875C8.01094 26.7661 8.08685 26.0656 8.13323 25.6199C13.5634 24.9991 24.6514 23.6951 29.87 22.962L30.1931 22.9166L30.2817 22.6026C30.8575 20.5608 31.4699 18.55 32.0828 16.5376L32.0993 16.4835C32.7171 14.4548 33.3351 12.4241 33.9128 10.3681C35.5933 4.38695 41.1008 0 47.6356 0C55.5067 0 61.8853 6.36364 61.8853 14.2108C61.8853 22.0367 56.1051 27.7648 47.597 28.4231ZM38.5759 21.2822L38.3766 22.0068L39.1219 21.9107C39.9993 21.7976 41.0101 21.7041 42.0847 21.6047L42.5562 21.561C43.8007 21.4451 45.1095 21.3172 46.3517 21.1399C47.5917 20.9629 48.7831 20.7344 49.7906 20.4124C50.785 20.0946 51.6667 19.6656 52.2211 19.0463C54.8541 16.1048 54.9792 11.9749 52.3521 9.35478C49.7344 6.74394 45.0391 6.68777 42.1442 9.97902C41.7801 10.393 41.455 11.0966 41.157 11.9023C40.8515 12.7279 40.5501 13.7313 40.2561 14.8007C39.9617 15.8714 39.6719 17.0186 39.391 18.1328L39.3695 18.2183C39.0956 19.3046 38.8305 20.3563 38.5759 21.2822ZM23.8094 45.7178L24.0087 44.9932L23.2634 45.0893C22.386 45.2024 21.3752 45.2959 20.3007 45.3953L19.8291 45.439C18.5846 45.5549 17.2758 45.6828 16.0336 45.8601C14.7936 46.0371 13.6022 46.2656 12.5948 46.5876C11.6003 46.9054 10.7187 47.3344 10.1643 47.9537C7.53122 50.8952 7.40613 55.0251 10.0332 57.6452C12.651 60.2561 17.3462 60.3122 20.2411 57.021C20.6052 56.607 20.9303 55.9034 21.2284 55.0977C21.5338 54.2721 21.8352 53.2687 22.1292 52.1993C22.4236 51.1287 22.7134 49.9814 22.9943 48.8672L23.0159 48.7817C23.2897 47.6953 23.5548 46.6438 23.8094 45.7178Z" fill="white"/>
          </svg>

          <div class="sub-name">Blog Example</div>
        </div>
      </factor-link>
    </div>

    <div class="actions nav-area">
      <account-menu v-if="!userLoading && isLoggedIn()" />
      <factor-link
        v-else-if="!userLoading"
        class="nav-link"
        event="sign-in-modal"
        data-test="signin-link"
      >Login / Sign Up</factor-link>
    </div>
  </div>
</template>

<script lang="ts">
import { isLoggedIn, userInitialized } from "@factor/user"
import { factorLink } from "@factor/ui"
import { accountMenu } from "@factor/plugin-standard-signin"
export default {
  components: { factorLink, accountMenu },
  data() {
    return {
      userLoading: true
    }
  },
  async mounted(this: any) {
    await userInitialized()

    this.userLoading = false
  },
  methods: {
    isLoggedIn
  }
}
</script>
<style lang="postcss">
.blog-header {
  display: grid;
  grid-template-columns: max-content 1fr 200px;
  grid-template-areas: "grid-brand grid-selector grid-actions";
  grid-column-gap: 1rem;
  padding: 0.25em 1rem;
  width: 100%;
  background: var(--color-bg-contrast);
  color: var(--color-text);
  align-items: center;
  justify-content: space-between;

  .brand {
    grid-area: grid-brand;
  }
  .selector {
    grid-area: grid-selector;
  }
  .actions {
    grid-area: grid-actions;
    justify-self: flex-end;
  }
  @media (max-width: 900px) {
    grid-template-columns: max-content 1fr;
    grid-template-areas: "grid-brand grid-actions" "grid-selector grid-selector";
  }

  .logo {
    display: flex;
    align-items: center;
    color: inherit;
    .sub-name {
      font-weight: 700;
      margin-left: 0.5rem;
      text-transform: uppercase;
      opacity: 0.3;
      font-size: 0.8em;
      line-height: 1;
    }
  }
  .fiction-icon {
    display: flex;
    align-items: flex-end;
    border-radius: 0.5rem;

    padding: 0.5rem 1rem 0.6rem 1rem;
    a {
      display: block;
    }
    svg {
      height: 1.25rem;
      width: auto;
      display: block;
    }
  }

  .nav-link {
    background-color: rgba(255, 255, 255, 0.1);
    box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.3);
    border-radius: 0.25rem;
    padding: 0.5em 1rem;
    font-size: 0.9em;
    font-weight: 600;
    &:hover {
      opacity: 0.8;
    }
  }

  .nav-area {
    padding: 0.5rem;
  }
  .selector {
    select {
      font-size: 0.9em;
      background-color: rgba(255, 255, 255, 0.1);
      color: #fff;
      box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.3);
    }
  }
}
</style>
